webpackJsonp([4],{"5xwL":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("czca"),o=n("MOKZ"),s=n("VU/8")(i.a,o.a,!1,null,null,null);s.options.__file="pages\\admin\\_postID\\index.vue",e.default=s.exports},MOKZ:function(t,e,n){"use strict";var i=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"admin-post-page"},[e("section",{staticClass:"update-form"},[e("AdminPostForm",{attrs:{post:this.loadedPost},on:{submit:this.onSubmitted}})],1)])};i._withStripped=!0;var o={render:i,staticRenderFns:[]};e.a=o},Ts8B:function(t,e,n){"use strict";var i=new(0,n("rqv+").Dropbox)({accessToken:"I-gDiSbwGpAAAAAAAAABzMsW27vO-9wMzYiZf0zNUPdkZobCJh_8PMfnUpCc0Xy5"});e.a=i},XS02:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.onSave(e)}}},[n("AppControlInput",{model:{value:t.editedPost.author,callback:function(e){t.$set(t.editedPost,"author",e)},expression:"editedPost.author"}},[t._v("Author Name")]),n("AppControlInput",{model:{value:t.editedPost.title,callback:function(e){t.$set(t.editedPost,"title",e)},expression:"editedPost.title"}},[t._v("Title")]),n("AppControlInput",{model:{value:t.editedPost.tags,callback:function(e){t.$set(t.editedPost,"tags",e)},expression:"editedPost.tags"}},[t._v("Tags")]),n("AppControlInput",{model:{value:t.editedPost.url,callback:function(e){t.$set(t.editedPost,"url",e)},expression:"editedPost.url"}},[t._v("Site Url")]),n("AppControlInput",{model:{value:t.editedPost.completed,callback:function(e){t.$set(t.editedPost,"completed",e)},expression:"editedPost.completed"}},[t._v("Date Completed")]),n("h1",[t._v("Thumbnail")]),t._v("\n            "+t._s(t.editedPost.images[0].name)+"\n            "),n("input",t._b({directives:[{name:"show",rawName:"v-show",value:""==t.editedPost.images[0].name,expression:"editedPost.images[0].name == ''"}],attrs:{id:"thumbnail-file",type:"file"},on:{change:t.onFileSelected,isThumb:function(e){t.thumbnail=!0}}},"input",t.$attrs,!1)),n("br"),n("br"),n("AppButton",{attrs:{disabled:t.disabled},on:{click:function(e){e.preventDefault(),t.onUpload(0)}}},[t._v("Upload")]),n("AppButton",{staticStyle:{"margin-left":"10px"},on:{click:function(e){e.preventDefault(),t.onRemove(0)}}},[t._v("Remove")]),n("br"),n("br"),n("h1",[t._v("Images")]),t._l(t.editedPost.images,function(e,i){return i>=1?n("div",{key:i},[t._v("\n              "+t._s(e.name)+"\n\n              "),n("input",t._b({directives:[{name:"show",rawName:"v-show",value:""==e.name,expression:"img.name == ''"}],attrs:{type:"file"},on:{change:t.onFileSelected}},"input",t.$attrs,!1)),n("br"),n("br"),n("AppButton",{attrs:{disabled:t.disabled},on:{click:function(e){e.preventDefault(),t.onUpload(i)}}},[t._v("Upload")]),n("AppButton",{staticStyle:{"margin-left":"10px"},on:{click:function(e){e.preventDefault(),t.onRemove(i)}}},[t._v("Remove")]),n("br"),n("br")],1):t._e()}),n("AppButton",{on:{click:function(e){return e.preventDefault(),t.onAddNew(e)}}},[t._v("Add new Image")]),n("AppControlInput",{attrs:{"control-type":"textarea"},model:{value:t.editedPost.content,callback:function(e){t.$set(t.editedPost,"content",e)},expression:"editedPost.content"}},[t._v("Content")]),n("AppControlInput",{attrs:{"control-type":"textarea"},model:{value:t.editedPost.previewText,callback:function(e){t.$set(t.editedPost,"previewText",e)},expression:"editedPost.previewText"}},[t._v("Preview Text")]),n("AppButton",{attrs:{type:"submit"}},[t._v("Save")]),n("AppButton",{staticStyle:{"margin-left":"10px"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.deletePost(e)}}},[t._v("Delete")]),n("AppButton",{staticStyle:{"margin-left":"10px"},attrs:{type:"button","btn-style":"cancel"},on:{click:t.onCancel}},[t._v("Cancel")])],2)};i._withStripped=!0;var o={render:i,staticRenderFns:[]};e.a=o},c3Ra:function(t,e,n){var i=n("x5uo");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("2040fc5d",i,!1,{sourceMap:!1})},czca:function(t,e,n){"use strict";var i=n("Dd8w"),o=n.n(i),s=n("s0md");n("Ts8B");e.a={data:function(){return{id:"",loadedPost:[]}},layout:"admin",middleware:["check-auth","auth"],components:{AdminPostForm:s.a},asyncData:function(t){return t.app.$axios.$get("/posts/"+t.params.postID+".json").then(function(e){return{loadedPost:o()({},e,{id:t.params.postID})}}).catch(function(e){return t.error()})},methods:{onSubmitted:function(t){var e=this;this.$store.dispatch("editPost",t).then(function(){e.$router.push("/admin")})}}}},dPnn:function(t,e,n){"use strict";var i=n("Dd8w"),o=n.n(i),s=n("Ts8B");e.a={props:{post:{type:Object,required:!1}},data:function(){return{disabled:!1,fileName:"",selectedFile:"",editedPost:this.post?o()({},this.post):{author:"Tiffany Marroquin",title:"",content:"",previewText:"",tags:"",images:[{name:"",link:"",path:"",id:""}],url:"",completed:""}}},methods:{addTo:function(t,e,n,i){var o=this;s.a.sharingCreateSharedLink({path:n,short_url:!1}).then(function(s){var a;a=s.url.replace("?dl=0","?raw=1"),0==i?(console.log("pass link"),o.editedPost.images[0].name=e,o.editedPost.images[0].path=n,o.editedPost.images[0].link=a,o.editedPost.images[0].id=t):(o.editedPost.images[i].id=t,o.editedPost.images[i].name=e,o.editedPost.images[i].link=a,o.editedPost.images[i].path=n)}).catch(function(t){console.log(t)})},onFileSelected:function(t){this.selectedFile=t.target.files[0],this.fileName=this.selectedFile.name},onUpload:function(t){var e=this;null!=this.selectedFile&&s.a.filesUpload({contents:this.selectedFile,path:"/"+this.fileName,autorename:!0}).then(function(n){e.addTo(n.id,n.name,n.path_display,t)}).catch(function(t){console.error(t)})},onRemove:function(t){0===t?(console.log(t+" in"),this.selectedFile="",this.editedPost.images[0].name="",this.editedPost.images[0].path="",this.editedPost.images[0].link="",this.editedPost.images[0].id=""):(this.editedPost.images.length>2||t>0)&&this.editedPost.images.splice(t,1)},onAddNew:function(){this.editedPost.images.push({name:"",id:"",link:"",path:""})},onSave:function(){this.$emit("submit",this.editedPost)},deletePost:function(){var t=this;this.$store.dispatch("deletePost",this.editedPost).then(function(){t.$router.push("/admin")})},onCancel:function(){this.$router.push("/admin")}}}},s0md:function(t,e,n){"use strict";var i=n("dPnn"),o=n("XS02"),s=!1;var a=function(t){s||n("c3Ra")},d=n("VU/8")(i.a,o.a,!1,a,"data-v-a6ad2964",null);d.options.__file="components\\admin\\AdminPostForm.vue",e.a=d.exports},x5uo:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"form[data-v-a6ad2964]{max-width:600px;margin:50px auto;padding:0 20px}",""])}});